# Project TODO

- [x] 테마 컬러 설정 (SCOOP 브랜드 컬러 적용)
- [x] 탭 네비게이션 구성 (홈, 히스토리, 프로필)
- [x] 아이콘 매핑 추가
- [x] 홈 화면 개발 (통계 카드, 주행 시작 버튼)
- [x] 주행 화면 개발 (속도계, 거리, 시간 표시)
- [x] 주행 로직 구현 (타이머, 거리 계산)
- [x] 히스토리 화면 개발 (주행 기록 리스트)
- [x] 프로필 화면 개발 (설정, 통계)
- [x] 주행 데이터 로컬 저장 (AsyncStorage)
- [x] 제공된 SCOOP 로고 적용 (주황색 브랜드 컬러)

- [x] expo-location 패키지 설치 및 GPS 권한 설정
- [x] 실시간 GPS 위치 추적 기능 구현
- [x] GPS 기반 실제 속도/거리 계산
- [x] 주행 경로 좌표 저장 기능
- [x] GPX 파일 생성 유틸리티 구현
- [x] GPX 파일 다운로드/공유 기능
- [x] 히스토리 화면에 GPX 다운로드 버튼 추가

- [x] GPS 속도 필터링 - 정지 상태에서 잘못된 속도 표시 버그 수정

- [x] GPS 기록이 전혀 되지 않는 문제 수정
- [x] 원본 LOOP 앱 UI 참고하여 디자인 개선

- [x] GPS 필터링 강화 - 시속 1km/h 이하 기록 제외
- [x] GPS 필터링 강화 - 위치가 뒤로 이동하거나 튀는 것 방지
- [x] react-native-maps 설치 및 설정
- [x] 주행 중 실시간 지도 표시
- [x] 주행 기록 상세 화면 (지도에 경로 시각화)
- [x] 백그라운드 GPS 추적 기능
- [x] LOOP 앱 스타일 홈 화면 UI 개선
- [x] LOOP 앱 스타일 트래킹 관리 화면 (프로필 화면으로 통합)

- [x] react-native-maps 제거 (Expo Go 호환성 문제)
- [x] WebView 기반 지도 컴포넌트로 교체 (OpenStreetMap + Leaflet)
- [x] 주행 화면 및 상세 화면 지도 업데이트

- [x] 백엔드 인증 API 구현 (회원가입/로그인)
- [x] 로그인 화면 UI 구현
- [x] 회원가입 화면 UI 구현
- [x] 인증 상태 관리 (Context/Hook)
- [x] 로그인 필수 라우팅 적용

- [x] 프로필 화면에 로그인한 사용자 정보 표시
- [x] 프로필 화면에 로그아웃 버튼 추가
- [x] 주행 기록 클라우드 동기화 (서버 저장)
- [x] 로컬 기록과 서버 기록 병합 로직
- [x] 비밀번호 찾기 화면 UI
- [x] 비밀번호 재설정 이메일 발송 API
- [x] 구글 OAuth 로그인 연동

- [x] 로그인 문제 확인 및 수정 (JWT 토큰에 appId, name 필드 추가)
- [x] 로그인 화면에 SCOOP 로고 이미지 적용
- [x] 지도 부드러움 개선 (애니메이션 루프, lerp 보간)
- [x] 네비게이션 스타일 - 진행 방향이 위로 오도록 회전
- [x] 내 위치 마커를 화살표 모양으로 변경
- [x] 기체 관리 기능 (킥보드 모델명, 누적 거리 등록)
- [x] 푸시 알림 기능 (주행 완료 알림 등)

- [x] 로그아웃 버그 수정 (쿠키 삭제 로직 개선)
- [x] 지도 회전 개선 - 화살표가 항상 화면 위쪽을 가리키도록 지도 자체 회전
- [x] 기체 관리 기능 (킥보드 모델명, 누적 거리 등록) - DB 스키마, API, UI 구현
- [x] 푸시 알림 기능 (주행 완료 알림 등) - 알림 설정 화면 추가
- [ ] Google OAuth 클라이언트 ID 설정 (사용자가 직접 설정 필요)

- [x] expo-notifications 오류 수정 (Expo Go 호환성) - 조건부 로딩으로 수정
- [x] 주행 기록 상세보기 GPS 데이터 표시 문제 수정 - getRidingRecordWithGps 사용
- [x] 주행 기록에 사용 기체 연결 기능 - 기체 선택 화면 추가
- [x] 기체별 통계 분석 기능 - 기체 통계 화면 추가

- [x] 로그인/로그아웃 화면 전환 문제 수정 (AuthContext 전역 상태 관리)
- [x] 주행 경로 공유 기능 (expo-sharing 사용)
- [x] 목표 설정 기능 (일간/주간 목표, 달성률 표시)
- [x] 기체 정비 알림 기능 (주행거리 기준 정비 알림)
- [x] 커뮤니티 탭 구현 (글 작성, 댓글, 주행 기록 공유, 좋아요)

- [x] 친구 기능 DB 스키마 (친구 요청 테이블) - friendRequests, friends 테이블
- [x] 친구 검색 기능 (닉네임으로 검색) - searchUsers API
- [x] 친구 요청 보내기/수락/거절 기능 - friends 화면
- [x] 친구 목록 화면 - app/friends.tsx
- [x] 팔로우/팔로워 시스템 - follows 테이블, user-profile 화면
- [x] 커뮤니티 이미지 첨부 기능 - expo-image-picker, S3 업로드
- [x] 주행 랭킹 기능 (주간/월간) - app/ranking.tsx

- [x] 커뮤니티 탭 인스타 스타일로 개선 (정보량 증가, 이미지 갤러리)
- [x] 좋아요 반응 속도 개선 (Optimistic Update 적용)
- [x] 조회수 중복 방지 (postViews 테이블로 1계정당 1카운트)
- [x] 랭킹 시스템 메인 화면으로 이동 (통계 아래 배치)
- [x] 프로필 사진 설정 기능 (edit-profile 화면)
- [x] 알림 센터 구현 (notifications-center 화면)
- [x] 주행 챌린지 기능 (challenges, create-challenge, challenge-detail 화면)

- [x] 프로필 사진 업로드 즉시 반영 (AuthContext refreshUser 호출)
- [x] 레벨 설명 팝업 (? 버튼 클릭 시 모달 표시)
- [x] 커뮤니티 버튼 동작 수정 (공유, 더보기 기능 추가)
- [x] 게시글 터치 영역 확대 (Pressable로 전체 감싸기)
- [x] 친구 실시간 위치 표시 (friends-map 화면, liveLocations API)
- [x] 메인 화면 알림 버튼 추가 (헤더에 알림/친구위치 버튼)
- [x] 챌린지 초대 기능 (challenge-detail에서 친구 초대 모달)
- [x] 주행 경로 지도 미리보기 (RoutePreview 컴포넌트)
- [x] 업적/배지 시스템 (badges 화면, 자동 배지 부여)

- [x] 프로필 사진 적용 문제 수정 (업로드 후 즉시 반영) - refreshUser forceRefresh 적용
- [x] 커뮤니티 주행기록 UI 오버플로우 수정 - RoutePreview overflow hidden 적용
- [x] 랭킹에서 친구요청 시 실제 사용자에게 요청되도록 수정 - userId 파라미터 지원
- [x] 레벨 네이밍 통일 (내 정보와 레벨 설명 팝업) - level-system.ts 모듈로 통일
- [x] 레벨 시스템 주행거리 10배 증가 (마지막 10만키로 이상) - 7단계 레벨 시스템
- [ ] 친구 실시간 위치 - 프로필 사진으로 표시
- [ ] 위치 공유 설정 (온/오프로 전체 지도 표시)
- [ ] 친구 요청 시 메시지 작성 기능
- [ ] 다크모드 토글
- [ ] 주행 음성 안내
- [ ] 친구 주행 기록 비교

- [x] 프로필 사진 등록 시 로그아웃 되는 버그 수정 - try-catch로 오류 처리
- [x] 커뮤니티 게시글 상세에서 사진 안 뜨는 문제 수정 - 이미지 섹션 추가
- [x] 업적/배지 시스템 수치 10배 증가 및 실제 동작 확인 - DB 및 UI 업데이트
- [x] 커뮤니티 댓글 답글 기능 추가 - parentId 기반 답글 시스템
- [x] 레벨 시스템 팝업 거리 표시 형식 수정 (5천km → 5,000km) - toLocaleString 사용
- [x] 친구 실시간 위치 프로필 사진으로 표시 - profileImageUrl 추가
- [x] 위치 공유 온/오프 설정 추가 - 프로필 설정에 토글 추가
- [x] 친구 요청 메시지 기능 추가 - message 필드 및 모달 UI

- [x] 다크모드 토글 기능 (설정에서 라이트/다크 모드 전환) - ThemeProvider 개선, 프로필 설정 UI
- [x] 주행 음성 안내 기능 (속도, 거리, 시간 TTS 안내) - expo-speech, voice-settings 화면
- [x] 친구 주행 기록 비교 화면 (친구와 나의 통계 비교) - compare-records 화면
- [x] 주행 지도 회전 취소 (네비게이션 스타일 → 자연스러운 표시) - 마커만 회전

- [x] 실제 친구 통계 연동 - 서버에서 친구 주행 통계 가져오기 (getFriendStats, getMyStats API)
- [x] 음성 안내 언어 선택 - 한국어/영어 지원 (voice-guidance.ts, voice-settings.tsx)
- [x] 친구 주행 시작 알림 기능 (liveLocation.update에서 isStarting 시 알림)
- [x] 친구 실시간 위치 지도 보기 (주행중인 친구 클릭 시 지도 모달 표시)
- [x] 주간 랭킹 실시간 데이터 연동 수정 (riding.tsx에서 주행 완료 시 서버 동기화)

- [x] 클라우드 동기화 오류 수정 (ridingRecords 테이블 스키마 문제) - scooterId 기본값 처리
- [x] 친구 위치 지도에 실제 지도 표시 (OpenStreetMap 연동) - FriendLocationMap 컴포넌트
- [x] 자전거 아이콘 → 킥보드 아이콘으로 변경 - electric-scooter 아이콘
- [x] 접속 시 자동 클라우드 동기화 (1회) - 홈 화면에서 자동 동기화
- [x] 기록 삭제 시 클라우드에서도 삭제 - deleteRecordEverywhere 함수
- [x] 최고속도 클릭 시 해당 구간 표시 - 최고속도 모달 및 기록 연결
- [x] 프로필 탭 → 설정 탭으로 이름 변경 - settings 아이콘
- [x] 레벨 진행도 실시간 업데이트 - 현재 거리 및 다음 레벨 표시

- [x] 프로필 사진 변경 시 로그아웃 문제 재수정 - refreshUser 호출 제거
- [x] 주간 랭킹 실시간 데이터 반영 문제 재수정 - 주행 완료 후 랭킹 쿼리 무효화
- [x] 주행 중 정지 시 일시정지/휴식시간 기능 - 자동 일시정지 및 휴식시간 카운트
- [x] GPX 파일 경로 따라가기 기능 - saved-routes, follow-route 화면
- [x] 테마 설정 버튼 개별 동작으로 변경 - 자동/라이트/다크 버튼 분리
- [x] 주행 경로 히트맵 기능 - route-heatmap 화면
- [x] 그룹 라이딩 기능 - group-riding 화면
- [x] 주행 통계 위젯 - 홈 화면에 주간/월간 통계 위젯

- [x] expo-document-picker 모듈 설치 및 오류 수정
- [x] GPX 경로 따라가기 시 자동 라이딩 시작 + 지도에 경로 표시
- [x] 구글 로그인 설정 방법 안내

- [x] Google Cloud Console OAuth 동의 화면 설정
- [x] OAuth 클라이언트 ID 생성 (웹, Android)
- [x] 앱에 환경 변수 설정 및 구글 로그인 테스트

- [x] ridingRecords 클라우드 동기화 INSERT 오류 수정

- [x] Google OAuth redirect_uri 오류 수정 (Expo Go에서는 exp:// 스키마 제한으로 불가, APK 빌드 후 정상 작동 예정)
- [x] 주행 완료 후 자동 동기화 확인 및 개선
- [x] 오프라인 모드 개선 (네트워크 연결 시 자동 동기화)
- [x] 동기화 상태 표시 (주행 기록 목록에 클라우드 아이콘 표시)
- [x] EAS CLI 설정 및 APK 빌드 준비
- [x] 앱 업데이트 알림 기능 구현
- [x] 업데이트 다운로드 기능 구현



- [x] APK 빌드에 Google OAuth 환경 변수 포함 (EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID)
- [x] APK에서 회원가입/로그인 안 되는 문제 수정 (서버 URL 설정)
- [x] Manus 클라우드 배포 (https://scoopride-xqsh52mn.manus.space)
- [x] 배포된 서버 URL로 APK 재빌드 (v1.0.0 빌드 완료)
- [x] 새 SCOOP 로고 적용 (앱 아이콘, 스플래시, 로그인 화면)
- [x] 자동 업데이트 알림 시스템 구현 (앱 버전 관리 DB, API, 클라이언트 연동)
- [x] Google OAuth redirect_uri_mismatch 오류 수정 (APK용 redirect URI 설정) - Expo redirect URI 추가 완료
- [x] 프로필 사진 수정 시 앱 튜김 버그 수정 - 에러 처리 개선 및 파일명 살균화
- [x] 관리자 대시보드 페이지 구현 (사용자 목록, 정보 수정, 활동 현황)

## 버그 수정 (2026-01-22)
- [x] 기체추가 버튼 누르면 모달 상단이 알림창 뚫고 나가는 버그 - SafeAreaView 추가
- [x] 프로필수정에서 저장 버튼 누르면 튜겨서 로그아웃되는 버그 - 에러 처리 개선
- [ ] 동기화가 제대로 동작 안 하는 버그
- [x] 친구요청 등 알림이 팝업으로 뜨지 않는 버그 - NotificationProvider 추가
- [x] 알림 누르면 해당 탭으로 이동하는 동작 없음 - 알림 타입별 라우팅 추가
- [x] GPS 값이 갑자기 튀는 경우 무시하는 보정 추가 - 최대 속도 100km/h, 최대 점프 제한
- [x] 그룹라이딩 시 방 참가 안 되는 버그 - 서버 연동으로 해결
- [x] 그룹라이딩 시 그룹원 전원 맵에 표시 - RideMap 컴포넌트 업데이트
- [x] 그룹라이딩 시 멀어진 그룹원 알림 - 500m 이상 이탈 시 경고
- [x] 친구와 주행기록 비교 시 평균속도 이상하게 나오는 버그 - DB 저장 값 10배 보정
- [x] APK에서 Google 로그인 여전히 안 됨 - Android 패키지 이름 업데이트 완료
- [x] 커뮤니티에서 타인이 올린 주행기록 열람 안 됨 - rides.getById API 추가

## 신규 기능 (2026-01-22)
- [x] 그룹 라이딩 서버 연동 (다른 기기 간 그룹 참가 가능) - DB 테이블, API, 클라이언트 연동
- [x] 그룹 라이딩 시 그룹원 전원 맵에 표시 - RideMap 컴포넌트 업데이트
- [x] 그룹 라이딩 시 멀어진 그룹원 알림 (500m 이상) - Alert 및 Haptics 알림
- [x] 푸시 알림 팝업 (친구 요청 등 실시간 알림) - InAppNotificationBanner 컴포넌트
- [x] APK 빌드 v1.1.0 완료 (버그 수정 및 신규 기능 포함)

## 장기 로드맵 (Phase 2-5) - 2026-01-23 추가

### Phase 2: 지도 기반 정보 공유 시스템 (다음 단계)
- [ ] 스탬프/깃발 시스템 (맛집, 카페, 주유소, 화장실, 위험구간 등 마커)
- [ ] 주행 구간 색상 표시 (방문 횟수에 따라 색상 변경) - BFF 앱 참고
- [ ] 위젯/상단바로 라이딩 ON/OFF 간편화 (실사용자 압도적 동의)
- [ ] GPX 파일 네비게이션 기능 강화
- [ ] 도전과제 시스템 확장 (1주일 1000km 등)
- [ ] 근방 유저에게 구난요청 기능 (사고, 기름 부족 등)
- [ ] 이모지 전송 기능 - BFF 앱 참고

### Phase 3: 차량 확장 (오토바이/자동차)
- [ ] 오토바이 지원 추가
- [ ] 자동차 지원 추가
- [ ] 배기량/차종별 커뮤니티
- [ ] 연비 계산 기능
- [ ] 주유 기록 기능

### Phase 4: 차계부 및 정비 이력
- [ ] 차계부 기능 (주유, 정비, 튜닝 기록) - 마이클 앱 참고
- [ ] 기종별 파츠리스트 및 교체주기 표시
- [ ] 소모품 교체 주기 알림
- [ ] 차대번호(VIN) 기반 이력 관리
- [ ] 소유자 변경 이력 추적
- [ ] 출고일 자동 조회
- [ ] 누적 주행거리 추적 (차대번호 기반)
- [ ] 정비소/딜러 연동 (정비 기록 자동 연동)

### Phase 5: 고급 기능
- [ ] 구난 요청 시스템 (사고, 고장, 연료 부족)
- [ ] 센서 활용 (뱅킹 각도, 가속력, 고도 측정)
- [ ] 정비 예약 시스템
- [ ] 보험사 연동
- [ ] 단체라이딩 음성채팅 기능

### 기술 고려사항
- [ ] Google Maps API 전환 검토 (사용자 1,000명 이상 시)
- [ ] 마커/스탬프 DB 스키마 설계 (map_markers 테이블)
- [ ] 차계부 DB 스키마 설계 (vehicle_logs 테이블)
- [ ] 차대번호 이력 DB 스키마 설계 (vin_history 테이블)

### 참고 앱
- BFF: 주행 구간 색상, 이모지
- 까만물투어: 스탬프 좌표 공유
- 렘블러: 전체 주행기록 지도 보기
- 리라이브: 사진 경로 표시
- 마이클: 차량 정비/파츠 관리
- LOOP: 전체 UI/UX 참고

### 참고 자료
- 하마의 라이딩 지도: https://www.google.com/maps/d/u/0/viewer?mid=1EYwRJ2GaFq3mlRBqc-9a6lHvMOf7I4Q
- 설문 분석: /docs/survey-analysis.md
- 로드맵 상세: /docs/ROADMAP.md
- [ ] 업데이트 배너가 표시되지 않는 버그 수정

## 버그 수정 및 기능 추가 (2026-01-23)
- [ ] Google OAuth "Custom URI scheme is not enabled" 오류 수정
- [x] 동기화 안 되는 버그 수정 - 상세 로깅 추가 및 에러 메시지 개선
- [x] 프로필 수정 저장 시 튕겨서 로그아웃되는 버그 재수정 - mutation 콜백 분리 및 비동기 캐시 무효화
- [x] 커뮤니티 주행기록 상세보기 로딩만 되고 내용 안 나오는 버그 수정 - 로딩 상태 표시 및 에러 처리 개선
- [x] 설정에 앱 버전 버튼 추가 (새 버전 있으면 "새로운 버전 확인" 문구, 클릭 시 다운로드) - appVersion API 및 UI 구현
- [x] 업데이트 알림 팝업 기능 개선 - 앱 버전 체크 API 연동
- [x] 백그라운드에서 주행기록 정상 작동하도록 개선 - background-location.ts 이미 구현됨
- [x] 그룹 라이딩 기록에 "그룹 라이딩" 표시 및 함께한 멤버 정보 표시 - ride-detail.tsx 업데이트
- [x] 그룹 라이딩 시 맵에 같이 라이딩 중인 친구 표시 - RideMap 컴포넌트 groupMembers 지원
- [x] 알림 탭에서 클릭 시 해당 화면으로 이동 개선 (친구요청→친구요청탭, 라이딩중→실시간위치) - notifications-center.tsx 업데이트
- [x] 레벨 시스템 설명 영어로 변경 (Junior Rider, Rookie Rider 등) - level-system.ts titleEn 추가
- [x] Google OAuth "Custom URI scheme is not enabled" 오류 수정 - Google Cloud Console에서 Android 클라이언트 고급 설정에서 활성화
- [x] APK v1.2.0 빌드 큐 등록 완료 (https://expo.dev/accounts/pinetreeb/projects/scoop-riding/builds/e3160c32-3e78-42ac-8a24-d99d92f7351b)

## 버그 수정 (2026-01-23 추가)
- [x] Android APK에서 클라우드 동기화 안 되는 문제 수정 - 상세 로깅 추가, 인증 토큰 저장/전달 로직 개선
- [x] Android APK에서 커뮤니티 타인 주행기록 열람 안 되는 문제 수정 - 동기화 문제와 동일 원인
- [x] APK v0.0.3 빌드 큐 등록 완료 (https://expo.dev/accounts/pinetreeb/projects/scoop-riding/builds/57591a97-7c1e-4ffa-a300-f8c3bdd09a8e)
- [x] APK v0.0.3 배포 완료 - 다운로드: https://expo.dev/artifacts/eas/bMAtGUJFgUHLA5tbF8BMwE.apk
- [x] Android APK 클라우드 동기화 5개 실패 문제 해결 - JWT 시크릿 키 일관성 문제 수정 및 로깅 추가
- [x] 동기화 함수 직접 fetch API 사용으로 변경 - tRPC 클라이언트 대신 직접 토큰 전달
- [x] APK v0.0.4 빌드 큐 등록 (https://expo.dev/accounts/pinetreeb/projects/scoop-riding/builds/4f280223-0567-4c8d-bc98-55e2e2bb6b70)
- [x] APK v0.0.4 배포 완료 - 다운로드: https://expo.dev/artifacts/eas/aLVB2fgp2AqajUawabVUNL.apk
- [x] 클라우드 동기화 - 업로드 성공 후 로컨 synced 상태 업데이트 실패 문제 수정 - 응답 파싱 개선 및 status 200 시 성공 처리
- [ ] 앱 버전 체크 API에서 이전 버전 앱이 최신버전으로 표시되는 버그 수정

## 버그 수정 (2026-01-23 추가)
- [ ] 백그라운드 동작 안됨 (화면 끄거나 다른 앱 사용 시 기록 사라짐)
- [ ] 주행 종료 시 가끔 저장 안 되는 문제
- [ ] 친구 위치 확인 화면에서 알림창 뚫고 올라가는 UI 오버레이 문제
- [ ] 고속 주행(시속 100km/h 전후) 또는 터널 진입 시 주행 기록 안 되는 버그

## 버그 수정 (2026-01-26)
- [x] MAX_REALISTIC_SPEED 300 km/h로 상향 (고속 주행 지원)
- [x] GPS 신호 복구 시 기록 재개 로직 수정 (터널 등 신호 끊김 대응)
- [x] 친구 위치 화면 SafeArea 적용 (상단바 침범 방지)

## 기능 개선 (2026-01-26)
- [x] 백그라운드 주행 기록 동작 개선 (화면 끄거나 다른 앱 사용 시에도 기록 유지)
- [x] 상단 알림바(Notification)에 주행 정보 표시 (속도, 거리, 시간 등)
- [x] 주행 종료 시 저장 실패 문제 디버깅 및 수정

## 기능 개선 (2026-01-26) - 2차
- [x] 알림바 탭 시 앱 복귀 딜링크 설정 (주행 화면으로 바로 이동)
- [x] 배터리 최적화 안내 팝업 추가 (Android 기기 백그라운드 추적 안정화)

## 빌드 및 배포 (2026-01-26)
- [x] 배터리 최적화 가이드에서 삼성 외 제조사 가이드 제거
- [x] 앱 버전 0.0.5로 설정
- [x] APK 빌드 (a546a075)
- [x] EAS Update(OTA) 설정 (f0c37d2b-39a4-49d9-82f6-31fa9c9662e7)
- [x] DB에 v0.0.5 버전 정보 등록
- [x] 업데이트 알림 팝업 설정 (기존 앱에서 자동 표시)
- [x] 배포 (APK: mpHM9EaAgwWGZBCXd1iBQF.apk)

## 버그 수정 (2026-01-27)
- [x] 클라우드 동기화 실패 문제 해결 (서버에 이미 있는 기록 확인 후 synced 마킹)
- [x] 친구 주행 상태 오류 수정 (30분 이상 지난 위치는 주행 중으로 표시 안 함)

## 기능 개선 (2026-01-27) - 3차
- [x] OTA 업데이트 배포 (5df36301-6d6d-4c6c-9f0e-943659e6996b)
- [x] 동기화 실패 시 상세 에러 메시지 표시 (인증만료/네트워크/타임아웃/서버오류 등)
- [x] 주행 종료 시 자동 위치 공유 해제 확인 (정상 동작 중, 30분 필터 적용됨)

## 버그 수정 (2026-01-27) - 긴급
- [ ] 클라우드 동기화 여전히 실패 - 심층 디버깅 필요

## 대규모 버그 수정 및 기능 개선 (2026-01-27)

### 버그 수정
- [x] 1. 상단 알림바 데이터 표시 오류 (주행 시작 시 초기화, 매초 업데이트) - distance 단위 오류 수정 (이미 미터 단위인데 1000을 곱하던 버그)
- [x] 2. 최고속도 100km/h 제한 문제 (99.8km/h에서 카운터 스톱) - getMaxSpeed 함수에서 MAX_REALISTIC_SPEED(300km/h) 사용하도록 수정
- [x] 3. 주행시간 카운터 문제 (휴식 이후 주행시간 증가 안 함) - isAutoPausedRef 추가하여 클로저 문제 해결
- [ ] 4. 클라우드 동기화 실패 및 로컬 데이터 유실 → 서버 직접 저장 방식으로 전환
- [x] 5. 주행 지도 깜빡임 및 급격한 위치 이동 → 네비게이션처럼 부드럽게 수정 - 보간 계수 조정 (0.12→0.08, 0.08→0.05), 지도 HTML 재생성 방지
- [x] 6. 주행 지도 화면 전체화면으로 수정 및 UI 개선 - 마진 제거, borderRadius 0, 속도/거리/시간 오버레이 추가
- [x] 7. 주간랭킹/전체통계 실시간 반영 확인 - 이미 구현됨 (주행 종료 시 invalidate 호출)

### 기능 개선 - 그룹 라이딩 재설계
- [x] 8-1. 그룹 라이딩 방 생성 (호스트 + 패스워드) - 이미 구현됨 (6자리 코드 사용)
- [x] 8-2. 참여자들이 호스트 주행화면 서버에 접속 - 이미 구현됨 (groupId 파라미터로 주행 화면 연동)- [x] 8-3. 모든 참여자 주행화면에 각 인원 위치 실시간 표시 - 이미 구현됨 (RideMap 컴포넌트)
- [x] 8-4. 3km 이상 멀어지면 "팀원이 멀어졌습니다" 알림 - 500m에서 3km로 변경 완료
- [x] 8-5. 그룹원 주행 종료 시 알림 + 지도에서 위치 제거 - isRiding 상태 감지 로직 추가


## v0.0.8 기능 추가 (2026-01-27)

### 동기화 로직 강화
- [x] 1-1. 동기화 실패 시 자동 재시도 로직 (지수 백오프) - syncRecordWithRetry 함수 구현
- [x] 1-2. 로컬 데이터 백업 로직 (별도 백업 키 사용) - backupAllRecords, restoreFromBackup 구현
- [x] 1-3. 오프라인 동기화 큐 구현 - addToSyncQueue, getSyncQueue 구현
- [x] 1-4. 동기화 상태 표시 및 수동 재시도 버튼 - 홈 화면에 동기화 상태 바 추가
- [x] 1-5. 네트워크 상태 감지 및 자동 동기화 - NetInfo 사용, startBackgroundSync 구현

### 그룹 라이딩 채팅
- [x] 2-1. 서버 채팅 API 구현 (메시지 전송/조회) - sendMessage, getMessages, getNewMessages API 추가
- [x] 2-2. 클라이언트 채팅 UI 구현 - GroupChat 컴포넌트 생성
- [x] 2-3. 실시간 메시지 폴링 - 2초마다 새 메시지 확인
### 주행 기록 상세 분석 (삼성헬스 스타일)
- [x] 3-1. 고도/속도 그래프 컴포넌트 구현 - RideChart 컴포넌트 생성 (SVG 기반)
- [x] 3-2. 탭 전환 UI (고도/속도) - 녹색/파란색 탭 버튼
- [x] 3-3. 시간축 기준 그래프 표시 - X축에 시간 (MM:SS) 표시
- [x] 3-4. 평균/최고 속도 하단 표시 - 삼성헬스 스타일 통계 표시더링


## v0.0.9 기능 추가 (2026-01-27)

### 그룹 라이딩 음성 채팅 (추후 고려사항 - WebRTC 실시간 통화 필요)
- [ ] 1-1. 음성 채팅 서버 시그널링 API 구현
- [ ] 1-2. WebRTC 피어 연결 관리 모듈 구현
- [ ] 1-3. 음성 채팅 UI 컴포넌트 구현
- [ ] 1-4. 음소거/스피커 토글 기능
- [ ] 1-5. 그룹 라이딩 화면에 음성 채팅 통합

### 주행 경로 비교
- [x] 2-1. 과거 주행 기록 선택 UI 구현 - 모달 기반 기록 선택기
- [x] 2-2. 두 경로 오버레이 지도 표시 - CompareMap 컴포넌트 (Leaflet)
- [x] 2-3. 구간별 속도/시간 비교 차트 - SpeedComparisonChart (SVG)
- [x] 2-4. 비교 결과 요약 통계 - 거리/시간/평균속도/최고속도 비교

#### 챌린지 시스템 확장
- [x] 3-1. 그룹 챌린지 생성/참가 기능 - 이미 구현됨 (challenges.tsx, create-challenge.tsx)
- [x] 3-2. 주간/월간 목표 설정 UI - 이미 구현됨 (goals.tsx)
- [x] 3-3. 목표 달성 시 보상 알림 - 이미 구현됨 (badges.tsx)
- [x] 3-4. 챌린지 리더보드 개선 - 이미 구현됨 (challenge-detail.tsx)
- [x] 3-5. 홈 화면에 챌린지/목표/배지 바로가기 추가리더보드 UI


## v0.0.7 버그 수정 및 UI 개선 (2026-01-27)

### 버그 수정
- [x] 1. 주행시간 카운터 문제 재수정 (00:00:01에서 멈춤) - interval 의존성 배열 비우고 ref로 최신 값 참조
- [x] 2. 친구 실시간 위치 업데이트 빈도 증가 (27분전 표시 문제) - 친구 지도 5초→2초, 알림 10초→5초

### UI 개선
- [x] 3. 주행 지도 전체화면 + 반투명 검정 오버레이에 흰색 텍스트 - 지도 전체화면, 속도/거리/시간/평균/최고 오버레이, 컨트롤 버튼 오버레이
- [x] 4. 홈화면 배지 카드 크기 통일 (챌린지, 목표와 동일하게) - minHeight: 110 적용, 텍스트 줄바꿈
- [x] 5. 그룹 라이딩 버튼을 홈화면 라이딩 시작 아래로 이동 - 라이딩 시작 바로 아래에 그룹 라이딩 카드 추가

### 신규 기능
- [ ] 6. Google Maps API 연동

## 기능 개선 (2026-01-27) - 앱 이름 변경
- [x] 앱 이름 "SCOOP Riding" → "SCOOP 라이딩"으로 변경
- [x] Google Cloud 프로젝트 이름 "SCOOP Riding"으로 변경
- [x] Google Maps Platform API 키 확인 (AIzaSyBNXFzCS5S1BAYbOldscsMxnkNd-89DeEY)

## Google Maps API 연동 (2026-01-27)
- [x] 앱 이름 "SCOOP Riders"로 변경
- [x] Google Maps API 키 환경변수 설정
- [x] react-native-maps 패키지 설치
- [x] app.config.ts에 Google Maps 설정 추가
- [x] 기존 OpenStreetMap/Leaflet 지도 컴포넌트를 Google Maps로 교체
- [x] 주행 화면 지도 Google Maps 적용
- [x] 주행 기록 상세 화면 지도 Google Maps 적용
- [x] 친구 위치 지도 Google Maps 적용
- [x] 그룹 라이딩 지도 Google Maps 적용 (경로 비교 화면 포함)

## 경로 안내 기능 추가 (2026-01-27)
- [x] 메인 화면 "어디로 달릴까요?" 섹션 분석
- [x] 목적지 검색 화면 구현 (Google Places API 연동)
- [x] 경로 안내 화면 구현 (Google Directions API 연동)
- [x] 턴바이턴 네비게이션 UI 구현
- [x] 주행 화면과 경로 안내 통합
- [ ] 음성 안내 기능 추가 (선택적)

## 경로 안내 기능 강화 (2026-01-27)
- [x] 이동 수단 모드 확장 (이륜자동차/오토바이 추가)
- [x] 음성 안내 기능 구현 (TTS)
  - [x] 턴바이턴 음성 안내
  - [x] 목적지 도착 음성 안내
  - [x] 경로 이탈 음성 안내
- [x] 경로 재탐색 기능 구현
  - [x] 경로 이탈 감지 (100m 이상 이탈 시)
  - [x] 자동 경로 재계산 (30초 쿨다운)
- [x] 즐겨찾기 장소 기능 구현
  - [x] 즐겨찾기 추가/삭제 (최근 검색 길게 누르기 또는 별 아이콘 클릭)
  - [x] 즐겨찾기 목록 표시 (목적지 검색 화면 상단)
  - [x] 즐겨찾기에서 바로 경로 안내 시작

## APK 빌드 및 배포 (2026-01-27)
- [x] EAS Build APK 빌드 시작 (Build ID: 553a6c2b-d622-49e3-80a6-67f4a25b5519)
- [x] 빌드 완료 (2026-01-27 02:22:18)
- [x] APK 다운로드 완료 (scoop-riders-v0.0.9.apk, 57MB)
- [x] 앱 배포 및 업데이트 알림 설정 (DB에 v0.0.9 버전 등록 완료)

## 버그 수정 (2026-01-27) - v0.0.9 긴급
- [x] 주행 기록 시 강제종료 오류 수정 (Google Maps 임시 비활성화, OpenStreetMap 사용)
- [x] 같은 버전인데 업데이트 알림 뜨는 문제 수정 (CURRENT_APP_VERSION 0.0.5 -> 0.0.9 업데이트)
- [x] 주간 랭킹 데이터 불일치 수정 (주간 기준 월요일~일요일로 통일)

## v0.0.10 빌드 (2026-01-27) - Google Maps API 키 포함
- [x] Google Maps 재활성화 (riding.tsx)
- [x] EAS 환경변수에 Google Maps API 키 설정
- [x] APK 빌드 시작 (Build ID: b1d380a4-a74e-4433-9964-6bbcba42fdea)
- [x] 빌드 완료 및 배포 (APK: nXBbH7MWtNuM8VLZqZNmeG.apk, DB 등록 완료)

## 버그 수정 (build-20260127-1)
- [ ] 동기화 오류 수정 (2개 미동기화 실패)
- [ ] 휴식중 상태가 풀리지 않는 버그 수정 (움직임 감지 시 주행 재개)
- [ ] 주행 화면 네비게이션 스타일 적용 (진행 방향이 위를 향하도록)
- [ ] 주행기록/주간랭킹 실시간 반영 수정
- [ ] 목적지 검색 시 경로 없음 오류 수정
- [ ] GPX 파일 내보내기 다운로드 기능 구현


## 버그 수정 (2026-01-27) - BUILD_20260127_01
- [x] 휴식중 상태가 풀리지 않는 버그 수정 (isAutoPausedRef 사용으로 클로저 문제 해결)
- [x] 주행 화면 네비게이션 스타일 지도 회전 적용 (진행 방향이 항상 위를 향하도록)
- [ ] 클라우드 동기화 오류 수정 - 서버 로그 확인 필요 (동기화 로직 자체는 정상, 서버 연결 확인 필요)
- [x] 주행기록/주간랭킹 실시간 반영 문제 수정 - useFocusEffect에서 랭킹 쿼리 무효화 추가
- [x] 경로 검색 "경로를 찾을 수 없습니다" 오류 수정 - 대체 모드 시도 및 상세 오류 메시지 추가
- [x] GPX 파일 내보내기 다운로드 기능 개선 - 파일 저장 확인 및 로깅 추가


## APK 빌드 (2026-01-27) - v0.0.11
- [x] EAS Build로 Android APK 빌드
- [x] 빌드 완료 후 다운로드 링크 제공
- [x] 앱 버전 업데이트 (0.0.10 -> 0.0.11)

## 업데이트 알림 배포 (2026-01-27)
- [x] 서버 앱 버전 설정을 0.0.11로 업데이트
- [x] 기존 사용자에게 업데이트 팝업 알림 활성화


## 버그 수정 (2026-01-28) - BUILD_20260128_0- [x] 주행기록 데이터 유저 ID 기반 저장으로 변경 (기기 종속 해제)정 종속)
- [x] 프로필 사진 서버 저장 확인 (이미 서버에 저장됨, 로그인 시 API에서 자동 로드)
- [x] 지도 회전 네비게이션 스타일 수정 (진행 방향이 위를 향하도록 화면 회전)
- [x] 고도 그래프 Y축 스케일 수정 (고저차가 시각적으로 잘 보이도록)
- [x] 업데이트 알림 버전 비교 로직 수정 (캐시 검증 및 디버그 로깅 추가)
- [x] 경로 검색 API 호출 개선 (한국 지역 Google Maps 제한 안내 + 네이버 지도 연동)
- [x] 주행 중 지도 터치 조작 기능 (10초 후 자동 추적 모드 복귀)


## APK 빌드 및 배포 (2026-01-28) - v0.0.12
- [x] 앱 버전 0.0.12로 업데이트
- [x] EAS Build로 Android APK 빌드
- [x] 서버 앱 버전 업데이트
- [x] 기존 사용자에게 업데이트 알림 배포


## 버그 수정 (2026-01-28) - 업데이트 알림 버그
- [x] v0.0.12에서 v0.0.11 업데이트 알림이 표시되는 버그 수정
  - profile.tsx에서 하드코딩된 버전 대신 Constants.expoConfig.version 사용
  - db.ts에서 getLatestAppVersion 함수 오류 처리 개선


## 버그/기능 수정 (2026-01-30) - BUILD_20260130_01
- [x] 클라우드 동기화 - 주행 종료 시 즉시 업로드 및 서버 확인
- [x] 지도 추적 - 사용자 조작 후 10초 뒤 자동 복귀 (이미 올바르게 구현됨)
- [x] 주행기록 유저 ID 기반 데이터 전체 검토 (기체 선택 데이터도 유저별 분리)
- [x] 구글 로그인 네이티브 방식으로 전환 (@react-native-google-signin/google-signin)
- [x] 그룹 라이딩 기능 개선
  - [x] 그룹원 위치 실시간 표시 (이미 구현됨, 3초마다 위치 업데이트)
  - [x] 멀어짐 알림 기능 (이미 구현됨, 3km 이상 이탈 시 경고)
  - [x] 참가 시 그룹장 승인 필요
  - [x] 커뮤니티에 그룹 공유 기능 (그룹 모집 게시글에 그룹 코드 입력 기능)
- [x] 주행기록 저장 안되는 문제 수정 (재시도 로직 및 저장 검증 추가)
- [x] 주행 종료 시 홈화면으로 이동 (기체 선택창 아님)
- [x] 한국 길안내 지원 맵 API 조사 (외부 네비게이션 앱 연동 기능 추가)


## UI/기능 변경 (2026-01-30) - BUILD_20260130_02
- [x] 홈화면 지도 검색 기능 제거
- [x] 이메일 버그 리포트 기능 추가 (설정 화면에 추가)
  - [x] 앱 버전, 기기 정보, 사용자 ID 자동 포함
  - [x] 버그 설명 입력 필드

## v0.0.13 빌드 준비 (2026-01-30) - BUILD_20260130_03
- [x] 기능 제안 폼 추가 (버그 리포트와 별도 메뉴)
- [x] 버그 리포트 시 자동 스크린샷 첨부 기능
- [x] 업데이트 알림 로직 철저 검증 (35개 테스트 통과)
  - [x] 현재 버전 = 서버 최신 버전 → 업데이트 알림 안 뗜
  - [x] 현재 버전 < 서버 최신 버전 → 업데이트 알림 뗼
  - [x] 현재 버전 > 서버 최신 버전 → 업데이트 알림 안 뗼
- [x] v0.0.13 APK 빌드 완료 (57MB)

## v0.0.13 서버 배포 (2026-01-30)
- [x] 서버 DB에 v0.0.13 버전 정보 등록 (ID: 210001, versionCode: 13)
- [x] 업데이트 알림 작동 확인
  - [x] v0.0.12 사용자 → hasUpdate: true, latestVersion: 0.0.13
  - [x] v0.0.13 사용자 → hasUpdate: false (업데이트 알림 안 뜸)

## 버그 수정 (2026-01-30)
- [x] 그룹 모집 게시글 작성 오류 수정 (postType에 group_recruit 타입 추가)

## 긴 주행 기록 저장 실패 문제 (2026-01-30)
- [x] 긴 주행 기록 저장 실패 원인 분석 및 수정
  - [x] GPS 포인트 데이터 크기 문제 - DB 컨럼 MEDIUMTEXT로 변경 (64KB → 16MB)
  - [x] AsyncStorage 저장 용량 한계 - 청크 분할 저장 로직 추가
  - [x] GPS 포인트 다운샘플링 - 1시간 이상 주행 시 최대 3600개로 제한
  - [x] 서버 업로드 크기 제한 - 10MB 초과 시 GPS 데이터 없이 저장

## GPS 트래킹 간격 수정 (2026-01-30)
- [x] 주행 맵 화면 자동 추적 문제 수정
  - [x] onRegionChange 이벤트가 카메라 이동 시마다 트리거되어 자동 추적 비활성화 문제
  - [x] 사용자 터치(onPanDrag, onTouchStart)만 감지하도록 수정
  - [x] 카메라 애니메이션 속도 개선 (300ms → 150ms)

## 지도 UX 개선 (2026-01-30)
- [x] 현재 위치 버튼 추가 (지도 조작 후 즉시 현재 위치로 복귀)
- [x] 속도 기반 자동 줌 레벨 조절 (고속 시 더 넓은 시야)
  - 0-10 km/h: 줌 17 (상세)
  - 10-30 km/h: 줌 16.5
  - 30-50 km/h: 줌 16
  - 50-70 km/h: 줌 15.5
  - 70-100 km/h: 줌 15
  - 100+ km/h: 줌 14 (넓은 시야)

## 주행 화면 UX 개선 (2026-01-30)
- [x] 속도계 디자인 개선 (더 크고 눈에 띄게)
  - 중앙 하단 배치, 폰트 72px
  - 50km/h 초과 시 오렌지색 경고 표시
  - 다크 배경 + 테두리 효과
- [x] 야간 모드 지도 스타일 적용 (다크 맵)
  - 시스템 다크 모드 자동 감지
  - 어두운 배경 + 회색 도로 + 검은 물
- [ ] 그룹 라이딩 시 그룹원 위치 표시 버그 수정
- [x] 그룹 라이딩 디버그 정보 화면 표시 추가 (v0.0.15)
- [x] 그룹 위치 업데이트를 validation 전에 항상 실행하도록 수정 (v0.0.16)
- [x] 그룹 라이딩 위치 업데이트가 DB에 저장되지 않는 버그 수정 - groupIdRef 클로저 문제 해결 (v0.0.17)
- [ ] 그룹 멤버 참가 시 호스트에게 승인 알림이 안 뜨는 버그 수정

## 버그 수정 및 기능 추가 (2026-02-01)
### 버그 수정
- [x] 그룹 라이딩 팀원 멀어짐 알림에서 자기 자신 제외
- [x] 그룹 라이딩 지도에 표시되는 그룹원 목록에서 자기 자신 제외
- [x] 그룹 라이딩 위치 정확도 문제 - 3회 연속 멀어졌을 때만 알림 + 1분 쿨다운
- [x] 주행 중 화면 꺼짐 및 기록 손실 버그 - GPS 포인트 실시간 다운샘플링 및 메모리 최적화

### 신규 기능
- [ ] 홈 화면 공지 팝업 기능
  - [ ] 업데이트/공지 알림 표시
  - [ ] "다시 보지 않기" 옵션
  - [ ] 설정에서 공지 열람 기능
- [ ] 관리자 페이지 강화
  - [ ] 공지 작성 기능
  - [ ] 유저 상세 정보 조회
- [ ] 관리자 권한 시스템
  - [ ] 커뮤니티 글 삭제 기능
  - [ ] 유저 밴 기능


## 버그 수정 및 기능 추가 (2026-02-01)
- [x] 그룹 라이딩 팀원 멀어짐 알림에서 자기 자신 제외
- [x] 그룹 라이딩 지도에 표시되는 그룹원 목록에서 자기 자신 제외
- [x] 그룹 라이딩 위치 정확도 문제 - 3회 연속 멀어졌을 때만 알림 + 1분 쿨다운
- [x] 주행 중 화면 꺼짐 및 기록 손실 버그 - GPS 포인트 실시간 다운샘플링 및 메모리 최적화
- [x] 홈 화면 공지 팝업 기능 (다시 보지 않기, 설정에서 열람)
- [ ] 관리자 페이지 강화 - 공지 작성 및 유저 상세 정보 조회
- [ ] 관리자 권한 시스템 - 커뮤니티 글 삭제 및 유저 밴 기능


## 버그 수정 및 기능 추가 (2026-02-01)
- [x] 그룹 라이딩 팀원 멀어짐 알림에서 자기 자신 제외
- [x] 그룹 라이딩 지도에 표시되는 그룹원 목록에서 자기 자신 제외
- [x] 그룹 라이딩 위치 정확도 문제 - 3회 연속 멀어졌을 때만 알림 + 1분 쿨다운
- [x] 주행 중 화면 꺼짐 및 기록 손실 버그 - GPS 포인트 실시간 다운샘플링 및 메모리 최적화
- [x] 홈 화면 공지 팝업 기능 (다시 보지 않기, 설정에서 열람)
- [x] 관리자 페이지 강화 (공지 작성, 유저 정보 조회)
- [x] 관리자 권한 시스템 (커뮤니티 글 삭제, 유저 밴)


## 버그 수정 (2026-02-01 추가)
- [x] 그룹 참가 시 호스트 승인 없이 자동 참가되는 버그 수정 - status 필드 이미 구현됨
- [x] 호스트에게 승인 대기 중인 멤버 표시 UI 추가 - group-riding.tsx에 승인/거절 버튼 구현됨

## 버그 수정 (2026-02-02)
- [x] 그룹 참가 승인 시스템 status 필드 버그 수정 (서버에서 status 필드 이미 포함됨)
- [x] 그룹 라이딩 거리 계산 문제 - 비정상 거리(50km 이상) 필터링 추가
- [x] 그룹 라이딩 디버그 정보에 경도(longitude) 표시 추가
- [x] 그룹 라이딩 pending 상태 사용자 시작 버튼 비활성화 및 승인 대기 UI 추가

## 버그 수정 (2026-02-02 추가)
- [x] 그룹 라이딩 팀원 멀어짐 알림 비활성화 (경도 데이터 문제로 인한 오작동)
- [x] 그룹 라이딩 디버그 오버레이 제거

## 배포 (2026-02-02)
- [x] v0.0.20 버전 정보 서버에 등록
- [x] 업데이트 공지 설정 (설정 화면에서 업데이트 확인 가능)

## 버그 수정 및 기능 추가 (2026-02-02)
- [x] 그룹원 위치 표시 버그 수정 (거리 정보 잘림 문제)
- [x] 키보드 가림 문제 해결 (KeyboardAvoidingView 적용)
- [x] 앱 시작 시 필요한 권한 요청 기능 추가 (위치, 알림 등)
- [x] 구글 로그인 버튼 임시 숨김

## 그룹 라이딩 개선 (2026-02-02)
- [x] 경도 데이터 문제 근본 원인 조사 - HTTP polling 지연 및 GPS 오차로 인한 문제
- [x] WebSocket 기반 실시간 위치 공유 구현

## 그룹 라이딩 개선 (2026-02-02 추가)
- [x] 팀원 멀어짐 알림 재활성화 (WebSocket 기반으로 정확도 향상)
- [x] 그룹 채팅 WebSocket 전환

## 기능 추가 (2026-02-02)
- [x] 오프라인 모드 강화 - 네트워크 없이 주행 기록 가능 (이미 구현됨)
- [x] 오프라인 주행 기록 자동 동기화 (연결 시) - NetworkSyncManager 구현됨
- [x] 그룹 주행 접속자 오버레이 UI (왼쪽 화면)
- [x] 그룹원 주행 상태에 따른 프로필 활성화 (회색→컨러)

## 버그 수정 (2026-02-02 긴급)
- [x] 그룹 주행 실시간 딜레이 문제 해결 (10분 이후 20초+ 지연)
- [x] WebSocket 메시지 큐 적체 문제 해결 - 서버 브로드캐스트 debouncing (500ms)
- [x] 메모리 누수 방지 최적화 - timeout 정리 추가
- [x] 위치 업데이트 throttling 최적화 - 클라이언트 2초 throttling

## 오픈 베타 준비 (2026-02-02)
- [x] 그룹 오버레이 멤버 탭 시 지도 이동 기능
- [x] 그룹 채팅 위치 공유 버튼 추가
- [x] 서버 업로드 메시지/파일 최적화 (크기 제한 추가)
- [x] DB 쿼리 최적화 및 인덱스 추가 (17개 인덱스 생성)
- [x] 오픈 베타 전체 오류 점검 (TypeScript 0 errors, 211 tests passed)

## 오픈 알파 테스트 v0.1.0 (2026-02-02)
- [x] 인앱 설문 기능 구현 (오픈 알파 테스트 피드백 수집, 2월 한달간)
- [x] 오픈 알파 테스트 공지 등록 (2월 한달간 표시)
- [ ] v0.1.0 버전 빌드 및 배포

## 오픈 알파 테스트 기능 강화 (2026-02-02)
- [x] 설문 결과 수집 API 구현 (DB 스키마, 서버 API, 관리자 대시보드)
- [x] 버그 리포트 스크린샷 첨부 기능 추가 (새 화면, 이미지 업로드 API)

## 관리자 기능 및 인센티브 (2026-02-02)
- [x] 관리자 대시보드 UI 구현 (설문 통계, 버그 리포트 목록)
- [x] 버그 리포트 상태 알림 기능 (처리 상태 알림 자동 전송)
- [x] 설문 응답 인센티브 배지 지급 기능 (알파 테스터 배지)

## 관리자 대시보드 통합 및 배지 알림 (2026-02-02)
- [x] 기존 관리자 기능 통합 (공지사항, 사용자 관리, 게시글 관리 탭 추가)
- [x] 배지 획득 알림 (축하 팝업 애니메이션 및 햇틱 피드백)

## v0.1.0 빌드 및 배포 (2026-02-02)
- [x] v0.1.0 APK 빌드
- [x] 배포 및 다운로드 링크 제공

## 공지 수정 (2026-02-02)
- [x] 공지 내용에서 마크다운 기호(**, ###) 제거

## 관리자 권한 부여 (2026-02-02)
- [x] 소나무군 계정에 관리자 권한 부여 (tmd7221@gmail.com)
- [x] 스쿡 모빌리티 계정에 관리자 권한 부여 (scoop@scoopmotor.com)

## 관리자 대시보드 접근 버그 수정 (2026-02-02)
- [x] auth-context에서 API 응답의 role 필드를 User 객체에 포함하도록 수정
- [x] 서버 buildUserResponse에 role 필드 추가

## 관리자 푸시 알림 및 v0.1.1 빌드 (2026-02-02)
- [x] 관리자 전용 푸시 알림 (새 버그 리포트 접수 시 관리자에게 알림)
- [x] v0.1.1 핫픽스 빌드 (관리자 대시보드 버그 수정 포함)

## 관리자 대시보드 버튼 표시 안됨 버그 (2026-02-02)
- [x] 관리자 대시보드 버튼이 설정 탭에서 보이지 않는 문제 수정 (캠시된 사용자 정보에서 role 업데이트)

## 관리자 대시보드 강제 종료 버그 (2026-02-02)
- [x] 관리자 대시보드 진입 시 앱 강제 종료 문제 수정 (React import 누락)

## 웹 관리자 페이지 구현 (2026-02-02)
- [x] 웹 기반 관리자 대시보드 구현 (/api/admin 경로)
  - [x] 설문 통계 및 응답 목록
  - [x] 버그 리포트 관리 (상태 변경)
  - [x] 공지사항 관리 (생성/수정/삭제)
  - [x] 사용자 관리 (검색, 수정, 삭제)
  - [x] 게시글 관리 (삭제)

## 통계 대시보드 강화 및 악성 유저 모니터링 시스템 (2026-02-02)
- [ ] DB 스키마 확장 (사용자 밴 테이블, 활동 로그 테이블)
- [ ] 악성 유저 탐지 알고리즘 구현
  - [ ] 비정상 주행 탐지 (상시 앱 켜놓기, 비현실적 주행 패턴)
  - [ ] 스팸 게시글 탐지 (반복 게시글, 짧은 간격 연속 작성)
  - [ ] 서버 트래픽 과다 사용자 탐지
- [ ] 웹 관리자 대시보드 통계 그래프 추가
  - [ ] 일별/주별 가입자 수 그래프
  - [ ] 사용자별 상세 주행 통계 그래프
- [ ] 악성 유저 모니터링 UI 추가
  - [ ] 의심 유저 목록 및 활동 로그
  - [ ] 밴/해제 기능

## 웹 관리자 대시보드 로그인 버그 (2026-02-02)
- [x] 웹 관리자 대시보드 로그인 JavaScript 오류 수정 (renderScreenshots 함수 템플릿 리터럴 이스케이프 문제)

## 웹 관리자 대시보드 로그인 버그 재수정 (2026-02-02)
- [ ] 로그인 버튼 클릭 시 입력란만 초기화되고 메인화면으로 넘어가지 않는 문제 수정
- [ ] 페이지 로드 시 로그아웃 버튼이 활성화되어 있는 문제 수정

## 버그 수정 (2026-02-02)
- [x] 웹 관리자 대시보드 로그인 안 되는 버그 수정 - JavaScript 이스케이프 문제 해결 (banUserQuick onclick에서 따옴표 이스케이프 문제)
- [x] 관리자 대시보드 총 주행거리 표시 오류 수정 - 미터 단위를 km로 변환 필요

## 기능 추가 및 버그 수정 (2026-02-02)
- [x] 사용자 관리 페이지 무한 로딩 버그 수정
- [x] 주간 통계 데이터 연동 (이번 주 주행 횟수, 총 거리, 게시글 수)
- [x] 사용자별 주행 기록 상세 조회 기능 추가

## 관리자 대시보드 개선 (2026-02-02 추가)
- [ ] 오늘 가입자 수 통계 오류 수정 (실제 13명인데 7명으로 표시)
- [ ] 관리자 활동 로그 기능 추가 (차단, 삭제, 수정 등 작업 기록)
- [ ] 사용자 상세 프로필 보기 기능 추가 (기체 목록, 친구 목록, 게시글 등)

## 관리자 대시보드 개선 (2026-02-02 완료)
- [x] 오늘 가입자 수 통계 오류 수정 (KST 시간대 계산 문제 해결)
- [x] 관리자 활동 로그 기능 추가 (차단, 삭제, 수정 등 작업 기록)
- [x] 사용자 상세 프로필 보기 기능 추가 (기체 목록, 친구 목록, 게시글 등)

## 관리자 대시보드 차트 기능 (2026-02-02)
- [x] 일별 가입자 추이 차트 (최근 7일)
- [x] 주별 가입자 추이 차트 (최근 4주)
- [x] 일별 주행 통계 차트 (주행 횟수, 총 거리)
- [x] 주별 주행 통계 차트 (주행 횟수, 총 거리)
- [x] Chart.js 라이브러리 연동

## 사용자 관리 페이지네이션 (2026-02-02)
- [x] 사용자 목록 API에 페이지네이션 파라미터 추가 (page, limit)
- [x] 페이지네이션 UI 구현 (이전/다음 버튼, 페이지 번호)
- [x] 전체 사용자 수 및 현재 페이지 정보 표시

## 부관리자 역할 추가 (2026-02-02)
- [x] 부관리자(sub-admin) 역할 추가 - 활동 로그 열람 불가
- [x] 부관리자 계정 생성 (subadmin@scoop.app / scoop2024!sub)
- [x] 권한별 UI 접근 제어 (활동 로그 탭 숨김)
- [x] 주 관리자만 부관리자 활동 모니터링 가능

## AI 챗봇 기능 구현 (2026-02-03)
- [x] Gemini API 키 환경 변수 설정
- [x] 서버 측 AI 챗봇 API 엔드포인트 구현 (/api/ai/chat, /api/ai/suggestions, /api/ai/health)
- [x] 모빌리티 특화 시스템 프롬프트 설계 (전동킥보드 안전, 법규, 주행 팁 전문가)
- [x] 모바일 앱 AI 챗봇 화면 구현 (AI 도우미 탭)
- [x] 대화 기록 저장 기능 (로컬 상태 관리)
- [x] Rate Limiting 및 오류 처리 (Gemini API 할당량 관리)


## 배터리 관리 및 AI 분석 기능 (2026-02-03)
- [x] 기체 등록 시 배터리 정보 입력 (전압, 용량, 셀 수, 배터리 타입)
- [x] 주행 시작 시 배터리 전압 입력 모달
- [x] 주행 종료 시 배터리 전압 입력 모달
- [x] 전압 → SOC 변환 로직 (배터리 타입별)
- [x] 에너지 소모량 계산 (Wh)
- [x] 평균 연비 계산 (Wh/km)
- [x] Gemini API 연동 AI 분석 기능
  - [x] 현지 날씨 연동 (온도에 따른 배터리 효율 보정)
  - [x] 배터리 사이클 분석 (누적 주행거리 기반 수명 예측)
  - [x] 주행 습관 분석 (속도, 가속도 패턴)
  - [x] 누적 데이터 기반 정확도 향상 시스템
- [x] 배터리 AI 채팅 화면 (battery-ai.tsx)
- [x] AI 채팅 일일 10회 제한 기능 (사용자별 일일 사용량 추적)
- [ ] (나중에) 목적지 경로 분석 - 맵 API 변경 시 구현 예정

### 리마인더
- 맵 API 변경 시 목적지 경로 분석 기능 추가 (예상 소모 전력, 도착 시 잔여 배터리 예측)

## 주행 후 자동 분석 리포트 기능 (2026-02-03)
- [x] AI 자동 분석 리포트 API 구현 (rides.analyzeRide)
- [x] 주행 완료 후 분석 리포트 모달 UI 구현 (RideAnalysisModal)
- [x] 주행 화면에 자동 분석 리포트 통합 (주행 종료 시 자동 표시)
- [x] 분석 리포트 내용: 연비 분석, 배터리 상태, 주행 습관, 개선 팁

## 배터리 분석 대시보드 및 AI 분석 다시 보기 (2026-02-03)
- [x] 배터리 분석 대시보드 화면 구현 (battery-dashboard.tsx)
  - [x] 기체별 연비 추이 그래프
  - [x] 배터리 건강도 시각화
  - [x] 총 주행 거리 및 에너지 소모량 통계
- [x] 주행 기록 상세 화면에서 AI 분석 다시 보기 기능
- [x] API 연동 점검 및 테스트

## 배터리 충전 기록 기능 (2026-02-03)
- [ ] 충전 기록 DB 테이블 추가
- [ ] 충전 기록 입력 화면 구현
- [ ] 충전 패턴 분석 기능

## 버그 수정 (2026-02-03)
- [ ] 갤럭시 S20 흰색 화면 버그 수정 (로딩 최적화)
  - [ ] 스플래시 화면 또는 로딩 인디케이터 추가
  - [ ] 초기 데이터 로딩 비동기 처리
- [ ] 그룹 주행 딜레이 최적화 (7-8분 이상 시 딜레이 발생)
  - [ ] 다른 앱 사례 조사
  - [ ] WebSocket 데이터 전송 최적화
- [ ] 메인 화면 카드 정렬 및 크기 통일
- [ ] 회원탈퇴 기능 구현
- [ ] 배터리 최적화 권한 안내 추가 (앱 설치 시)

## 배터리 충전 기록 기능 (2026-02-03)
- [x] 충전 기록 테이블 스키마 추가 (chargingRecords)
- [x] 충전 기록 화면 구현 (charging-record.tsx)
- [x] 충전 기록 API 구현 (charging.create, charging.getHistory, charging.getStats)

## 버그 수정 (2026-02-03)
- [x] 갤럭시 S20 흰색 화면 버그 - 로딩 스플래시 추가
- [x] 그룹 주행 딜레이 최적화 - WebSocket 적응형 업데이트, 델타 압축, 배치 처리
- [x] 메인 화면 카드 정렬 수정 - 동일한 높이 적용
- [x] 회원탈퇴 기능 추가 - auth.deleteAccount API 및 UI
- [x] 배터리 최적화 권한 안내 - Android 백그라운드 주행 안정화

## 정비 주기 알림 및 배터리 건강도 리포트 (2026-02-03)
- [ ] 배터리 종류 수정 (납축전지→리튬폴리머)
- [ ] 정비 주기 알림 기능 (누적 주행거리 기반)
  - [ ] 타이어 교체 알림 (예: 3,000km마다)
  - [ ] 브레이크 점검 알림 (예: 2,000km마다)
  - [ ] 정비 항목 커스터마이징 기능
- [ ] 배터리 건강도 리포트 기능
  - [ ] 충전 기록 기반 배터리 수명 예측
  - [ ] 배터리 교체 시기 안내
  - [ ] 건강도 시각화 (그래프/퍼센트)
- [ ] APK 빌드 및 배포

## 정비 주기 알림 및 배터리 건강도 리포트 (2026-02-03) - 완료
- [x] 배터리 종류 수정 (납축전지 → 리튬폴리머)
- [x] 정비 기록 테이블 스키마 추가 (maintenanceItems, maintenanceRecords)
- [x] 정비 관리 화면 구현 (maintenance.tsx)
- [x] 정비 주기 알림 기능 (누적 주행거리 기반)
- [x] 배터리 건강도 리포트 화면 구현 (battery-health.tsx)
- [x] 배터리 건강도 리포트 API 구현 (batteryHealth.generateReport, getLatestReport, getHistory)
- [x] 충전 기록 기반 배터리 수명 예측 및 교체 시기 안내

## 버그 수정 (2026-02-03 추가)
- [x] 주행 횟수가 0으로 표시되는 버그 수정 (주행 기록은 있지만 통계에 반영 안됨)
- [x] 리튜 → 리튜 오타 수정 (리튜이온, 리튜인산철, 리튜폴리머)

## 추가 작업 (2026-02-03)
- [x] 기존 주행 기록 통계 재계산 기능 추가
- [x] 주행 통계 새로고침 버튼 추가 (기체 상세 화면)
- [x] 관리자 대시보드 하얀 화면 버그 수정
